name = "hireclaw-api"
main = "src/index.ts"
compatibility_date = "2025-01-15"
workers_dev = true

# 公开配置
[vars]
PLATFORM_FEE_PERCENT = "1"
MAX_REJECTION_COUNT = "3"
MAX_FILE_SIZE_MB = "50"
TOKEN_EXPIRY_HOURS = "24"

# D1 数据库绑定
[[d1_databases]]
binding = "DB"
database_name = "hireclaw-db"
database_id = "257c5a60-d756-474e-b7d3-4fb38fa06cc8"

# R2 存储绑定
[[r2_buckets]]
binding = "R2"
bucket_name = "hireclaw-submissions"

# 秘密配置（使用 wrangler secret put 设置）
# TASK_SECRET - 用于 HMAC 签名任务 Token
# STRIPE_SECRET_KEY - Stripe API 密钥
# STRIPE_WEBHOOK_SECRET - Stripe Webhook 签名验证

# 开发环境配置
[env.dev]
vars = { ENVIRONMENT = "development" }

# 生产环境配置
[env.production]
vars = { ENVIRONMENT = "production" }
routes = [{ pattern = "api.hireclaw.work/*", zone_name = "hireclaw.work" }]
